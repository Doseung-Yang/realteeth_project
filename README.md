# 날씨 앱

한국 지역의 날씨 정보를 조회할 수 있는 웹 애플리케이션입니다. 공공데이터포털 기상청 API를 활용하여 실시간 날씨 정보를 제공하며, FSD 아키텍처를 기반으로 확장 가능하고 유지보수하기 쉬운 구조로 설계되었습니다.

## 프로젝트 실행 방법

### 사전 요구사항

- Node.js 18 이상
- pnpm (패키지 관리자)

### pnpm 설치

```bash
npm install -g pnpm
```

또는

```bash
curl -fsSL https://get.pnpm.io/install.sh | sh -
```

### 의존성 설치

```bash
pnpm install
```

### 개발 서버 실행

```bash
pnpm dev
```

### 프로덕션 빌드

```bash
pnpm build
pnpm start
```

### 테스트 실행

```bash
# 모든 테스트 실행
pnpm test

# 테스트 감시 모드
pnpm test:watch

# 커버리지 확인
pnpm test:coverage
```

## 구현한 기능에 대한 설명

### 현재 위치 기반 날씨 조회

Geolocation API를 통한 사용자 위치 감지 후, 위치 정보는 한 번만 요청하여 캐싱합니다. 위치 권한 거부 시 안내 메시지를 표시합니다.

### 장소 검색

`korea_districts.json` 데이터를 Map 기반으로 인덱싱하여 빠른 검색을 구현했습니다. 정확한 매칭을 우선하고 부분 매칭을 후순위로 처리하며, 최대 20개 결과로 제한하고 useMemo를 활용한 실시간 검색을 제공합니다. 검색 결과가 없을 때는 검색 예시와 안내를 표시합니다.

### 즐겨찾기 관리

localStorage를 통한 영구 저장과 Zustand 스토어를 자동 동기화합니다. 최대 6개 제한 로직을 구현했으며, 추가, 삭제, 별칭 수정 기능을 제공합니다.

### 날씨 데이터 관리

Tanstack Query를 통한 자동 캐싱(5분 staleTime)으로 중복 요청을 방지합니다. 행정구역명을 기상청 격자 좌표로 변환하여 API 호출하며, API 실패 시 사용자 친화적 메시지를 표시합니다. 좌표 정보가 없는 경우 안내 메시지를 표시합니다.

### 반응형 디자인

Tailwind의 grid 유틸리티를 활용하여 모바일(1열) → 태블릿(2열) → 데스크톱(3열) 그리드를 구현했습니다.

## 기술적 의사결정 및 이유

본 프로젝트는 리얼티쓰에서 실제로 사용하는 기술 스택과 유사한 환경을 가정하여 선택했습니다. 각 스택은 프로젝트의 특정 요구사항과 확장성을 고려하여 결정되었습니다.

### 프레임워크: Next.js 14 (App Router)

날씨 앱은 사용자 위치 기반 데이터 조회가 주요 기능이므로, 클라이언트 사이드 렌더링이 필수적입니다. App Router의 `app` 디렉토리 구조는 FSD 아키텍처의 `views` 레이어와 자연스럽게 분리되어, 라우팅 로직(`app/page.tsx`)과 페이지 컴포넌트(`views/home/ui/HomePage.tsx`)를 명확히 구분할 수 있습니다.

실제 구현에서는 `useSearchParams()`를 사용하는 검색 페이지에 Suspense를 적용하여 클라이언트 사이드 렌더링 이슈를 해결했습니다. 또한 파일 기반 라우팅으로 동적 라우트(`detail/[locationId]`)를 직관적으로 관리할 수 있어, 향후 기능 확장 시 라우팅 구조가 복잡해지더라도 유지보수가 용이합니다.

### 아키텍처: FSD (Feature-Sliced Design)

날씨 앱의 도메인을 분석하면 위치, 날씨, 즐겨찾기 세 가지 엔티티로 명확히 구분됩니다. 
FSD의 `entities` 레이어는 이러한 도메인을 독립적으로 관리하며, 예를 들어 즐겨찾기 기능을 확장하거나 수정할 때 `entities/favorite`만 수정하면 되므로 다른 기능에 영향을 주지 않습니다.

실제 프로젝트 구조에서 `features/location-search`는 검색 기능만 담당하고, 검색된 위치 데이터는 `entities/location`의 타입을 사용합니다. 이렇게 관심사가 분리되어 있어, 검색 알고리즘을 개선하거나 UI를 변경할 때 비즈니스 로직에 영향을 주지 않고 독립적으로 작업할 수 있습니다.

리얼티쓰와 유사한 협업 환경에서는 기능별로 담당자가 나뉘어 작업할 때, 각자가 담당한 레이어에만 집중할 수 있어 병렬 개발이 용이합니다.

### 상태 관리: Tanstack Query + Zustand

**Tanstack Query (서버 상태관리)**

날씨 데이터는 공공데이터포털 API를 통해 조회되며, 동일한 좌표에 대한 요청이 빈번하게 발생할 수 있습니다(예: 즐겨찾기 목록에서 여러 카드가 같은 지역을 표시). Tanstack Query의 자동 캐싱 기능으로 `queryKey: ["weather", lat, lon]`을 기준으로 중복 요청을 방지하고, 5분간 캐시된 데이터를 재사용하여 API 호출 횟수를 최소화했습니다.

또한 `enabled: !!lat && !!lon` 옵션을 통해 좌표가 없는 경우 불필요한 API 호출을 방지하는 등, 프로젝트의 실제 요구사항에 맞게 세밀하게 제어할 수 있습니다.

**Zustand (클라이언트 상태관리)**

즐겨찾기는 localStorage와 동기화되어야 하는 클라이언트 전역 상태입니다. Zustand의 간단한 API로 `addFavorite`, `removeFavorite`, `updateFavoriteAlias` 같은 메서드를 정의하고, 각 메서드에서 자동으로 localStorage에 저장하도록 구현했습니다. Redux를 사용했다면 액션, 리듀서, 미들웨어 등 보일러플레이트 코드가 많아졌을 것이며, 프로젝트 규모에 비해 과도한 복잡도가 추가되었을 것입니다.

서버 상태(날씨 API)와 클라이언트 상태(즐겨찾기)의 생명주기와 관리 방식이 다르기 때문에 분리했습니다. 날씨 데이터는 서버에서 가져오고 캐싱이 필요하지만, 즐겨찾기는 브라우저에 저장되고 즉시 반영되어야 합니다. 각 라이브러리가 이러한 특성에 최적화되어 있어, 프로젝트의 실제 요구사항에 가장 적합한 조합입니다.


### 패키지 관리자: pnpm

협업 환경에서는 각 개발자의 로컬 환경에서 동일한 의존성 버전을 보장하는 것이 중요합니다. pnpm의 엄격한 의존성 관리는 `package.json`에 명시된 버전과 실제 설치된 버전의 불일치를 방지하여, "내 컴퓨터에서는 되는데" 같은 문제를 사전에 차단합니다.

또한 심볼릭 링크를 활용한 디스크 공간 효율성은 여러 프로젝트를 동시에 작업할 때 유용하며, 설치 속도가 빠르다는 점은 CI/CD 파이프라인에서도 이점이 있습니다.

## 사용한 기술 스택

### Core
- React 18.3.1
- Next.js 14.2.35
- TypeScript

### 상태 관리
- @tanstack/react-query
- zustand

### 스타일링
- Tailwind CSS
- react-icons

### HTTP 클라이언트
- axios

### 개발 도구
- Jest
- React Testing Library
- ESLint
- pnpm
